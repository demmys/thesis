\chapter{プロジェクトのオープンソース化が与える影響}
\label{open-source}

本章では、本研究の対象とするプログラミング言語であるSwiftが最近行ったオープンソース化の影響についてまとめることで、本研究の着目する課題について整理する。

\section{オープンソースプロジェクトの特徴}
\label{open-source:feature}

オープンソースプロジェクトというプロジェクト形態についてどのようなプロジェクトでなければならないという制約などはないが、特に多くのプロジェクトが従っているオープンソースプロジェクトの持つべき性質がOpen Source Initiativeによって定義されている~\cite{opensource}。
表~\ref{table:open-source-definition}はそのオープンソースの定義をまとめたものである。

\begin{table}[!hbtp]
    \begin{center}
        \caption{オープンソースの定義}
        \begin{tabular}{|p{0.1\linewidth}|p{0.85\linewidth}|}
            \hline
            1 & そのソフトウェア全体を含むソフトウェアの販売・頒布を使用料を課すなどして制限しない \\
            \hline
            2 & ソースコードを利用・改変しやすい形で使用料などを課さずに公開し、その再頒布を制限しない \\
            \hline
            3 & そのソフトウェアの改変・派生および改変・派生したものの同ライセンスでの頒布ができる \\
            \hline
            4 & ソースコードとパッチファイルを共に頒布でき、変更されたソフトウェアの頒布が明確に認められていれば、改変されたソースコードの頒布を制限してもよい \\
            \hline
            5 & 特定の個人や団体を差別しない \\
            \hline
            6 & 利用する分野を制限しない \\
            \hline
            7 & 再頒布されたものであっても、追加の規約などなしにそのプログラムに付随する権利が認められる \\
            \hline
            8 & そのプログラムのライセンスの範囲内で使用・頒布される場合は、プログラムの一部分だけであっても同じ権利が認められる \\
            \hline
            9 & そのソフトウェアと共に頒布されるソフトウェアに対する制限は行わない \\
            \hline
            10 & 特定の技術やインターフェース形式に限定した条件を課さない \\
            \hline
        \end{tabular}
        \label{table:open-source-definition}
    \end{center}
\end{table}

オープンソースプロジェクトはそのソースコードが公開されているために誰でも変更したものを公開できるが、誰もが元々のプロジェクトと全く異なる場所で独自に拡張や修正をしているだけではソフトウェアの発展につながりづらい。
そのため、一般的に多くのオープンソースプロジェクトではその開発プロセス自体をオープンにし、誰もが本体プロジェクトのソフトウェアを拡張・修正できるようになっている。

\begin{table}[!hbtp]
    \begin{center}
        \caption{オープンソースプロジェクトにおける開発フロー}
        \begin{tabular}{|c|p{0.4\linewidth}|p{0.4\linewidth}|}
            \hline
            順序 & 手順 & 具体的な内容の例 \\
            \hline
            \hline
            1 & 任意のユーザからのソフトウェアの拡張や修正提案・要求 & オープンなチケット管理ツールやメーリングリストなどでの拡張・変更提案・バグ報告と議論 \\
            \hline
            2 & 特定の開発者による拡張や修正の実装と提案 & パッチファイルの投稿やPullRequestの作成 \\
            \hline
            3 & 他の開発者による実装へのレビュー & コーディングスタイルや機能の必要性に関する指摘や議論 \\
            \hline
            4 & 修正・拡張の本体ソフトウェアへの統合 & 拡張・修正後のソフトウェアをプロジェクトの最新バージョンとして置き換え \\
            \hline
        \end{tabular}
        \label{table:open-source-flow}
    \end{center}
\end{table}

多くのオープンソースプロジェクトで採用されている開発フローを表~\ref{table:open-source-flow}に示した。
この開発フローは表~\ref{table:open-source-definition}の4番目に該当するバッチファイルによって修正版を公開するような、少し特殊な形式のソフトウェア以外におけるものである。
このように、オープンソースプロジェクトにおける開発では特定組織内のみでの開発とは異なった開発フローとなるという点に注意が必要である。

また、Open Source Initiativeの提唱する定義に合致するオープンソースプロジェクトであっても、そのプロジェクトの形式はそのプロジェクトの方針を決定する主体をどこに置くかによって異なるということをRaymondが自身のエッセイ~\cite{raymond}で提唱している。
表~\ref{table:cathedral-bazaar}に示した「伽藍」と「バザール」という2つの形式である。

\begin{table}[!hbtp]
    \begin{center}
        \caption{Raymondによるオープンソースプロジェクトの分類}
        \begin{listliketab}
        \begin{tabular}{|c|p{0.8\linewidth}|}
            \hline
            形式 & 特徴 \\
            \hline
            \hline
            伽藍形式 & \textbullet \ 中央集権的に開発方針などを指揮し、主な開発を担当する特定集団が存在する \\
            & \textbullet \ 拡張や修正は開発方針に従って行われ、各リリースはよくチェックされる \\
            \hline
            バザール形式 & \textbullet \ 中心的な開発者が指揮者として与える影響は小さく、どの拡張や修正が実施されるかはコミュニティ全体の動向に左右される \\
            & \textbullet \ リリースは変更が加わるごとに更新され、極端に言えばバグを含んだまま行われる \\
            \hline
        \end{tabular}
        \label{table:cathedral-bazaar}
        \end{listliketab}
    \end{center}
\end{table}

伽藍形式のオープンソースプロジェクトはLinux以前の多くのオープンソースプロジェクトで取られていた手法であり、その開発方針は特定の集団によって制御される。
それに対して、Linuxに代表されるバザール形式のオープンソースプロジェクトでは開発者コミュニティの意思によって自然と必要な開発が進められ、プロジェクトの主体となっている個人や団体が開発の各フローにおいて特別に大きな影響力を持たないことを良しとする。

本研究で対象とするSwiftはプロジェクトへの多くの開発者の参加を期待しており、プロジェクトで進められるべき拡張や修正などのほとんどはオープンなメーリングリストやチケッティングツールで決められていくことを望んでいる~\cite{swift-org}。
このことから、Swiftはバザール形式でのプロジェクト展開を目指していると取れるため、本論文では以後バザール形式のオープンソースプロジェクトについてのみ言及する。

最後に、表~\ref{table:open-source-definition}に示したオープンソースプロジェクトの定義と表~\ref{table:cathedral-bazaar}に示したバザール形式の特徴から考えられるバザール形式のオープンソースプロジェクトのそうでないプロジェクトと比較した際の特徴を表~\ref{table:bazaar-features}に整理した。

これらの特徴がバザール形式のオープンソースプロジェクトにおいて、他のプロジェクトにはないメリットやデメリットを提供していると見ることができる。

\begin{table}[!hbtp]
    \begin{center}
        \caption{バザール形式のオープンソースプロジェクトの特徴}
        \begin{listliketab}
        \begin{tabular}{|p{0.35\linewidth}|p{0.6\linewidth}|}
            \hline
            特徴を作る要因 & 特徴 \\
            \hline
            \hline
            様々な人がプログラムを参照する & プログラムのあらゆる箇所に対して任意のタイミングで拡張提案・バグ報告が行われる \\
            \hline
            不特定多数のプログラマが開発に携わる & \textbullet \ プログラムのあらゆる箇所に対して任意のタイミングで拡張・修正が行われる \\
            & \textbullet \ 様々なコーディングスタイルの拡張・修正実装が提案される \\
            \hline
            ソフトウェアを利用したソフトウェアが開発される & ソフトウェアの部分的な利用が試みられる \\
            \hline
            ソフトウェアの技術中立性が高まる & 様々なプラットフォームへの移植が試みられる \\
            \hline
        \end{tabular}
        \label{table:bazaar-features}
        \end{listliketab}
    \end{center}
\end{table}

\afterpage{\clearpage}
\section{クローズドプロジェクトのオープンソース化による変化}
\label{open-source:change}

オープンソースプロジェクトは開発の開始当初からオープンソースプロジェクトとして進められているものと、開発の初期段階ではクローズドだったものが途中からオープンソース化されるものとに分けられる。
初めからオープンソースとなっているプロジェクトでは開発の初期段階でその開発フローなどを徐々に構築していくことが可能となるが、途中からオープンソース化されるプロジェクトではプロジェクトの開発フローや慣習をオープンソース化に合わせて変更していく必要がある。

本説では、~\ref{open-source:feature}節で述べたオープンソースプロジェクトの特徴とクローズドプロジェクトの特徴を比較することでプロジェクトのオープンソース化に伴う変化について整理する。

バザール形式でのオープンソース化を行うと、特に中央管理的に判断されていた開発方針などの事項が開発者コミュニティによって民主的に判断されるようになるという変化が最も大きく、それにともなっていくつかの重要な変化が起こる。
表~\ref{table:open-source-change}はその具体的な変化についてまとめたものである。

\begin{table}[!hbtp]
    \begin{center}
        \caption{バザール形式でのオープンソース化に伴う変化}
        \begin{tabular}{|p{0.25\linewidth}|p{0.35\linewidth}|p{0.35\linewidth}|}
            \hline
            起こる変化 & クローズドプロジェクトでの状況 & オープンソースプロジェクトでの状況 \\
            \hline
            \hline
            拡張や修正の要求・実装が行われるかどうかを決定する要因の変化 & リソースが限られているため、一定の開発方針に従って拡張や修正の優先順位が決定する & ある拡張や修正がそのコストを差し引いても充分な興味を引くものであれば、充分なリソースによって実装されて統合される \\
            \hline
            コーディングスタイルの流動化 & 開発者へのコーディングスタイルの徹底が可能なので同じスタイルを維持することができる & 過去のコードとの統一性も踏まえられるものの、その時々で支持されたコーディングスタイルが用いられるため、スタイルが変動する \\
            \hline
            ソフトウェアの各部分におけるモジュール化 & ソフトウェアの利用先などをすべて把握することが可能なのでモジュール化する部分を限定できる & あらゆる箇所で様々な形でソフトウェアが部分的にも使用されうるため、様々な箇所で高いモジュール性が求められる \\
            \hline
            マルチプラットフォーム化の進行 & 対象とするプラットフォームを制限することができる & 各プラットフォームの熱心なユーザによってマルチプラットフォーム化が進められる \\
            \hline
        \end{tabular}
        \label{table:open-source-change}
    \end{center}
\end{table}

オープンソースプロジェクトではどの拡張や修正を行うかがコミュニティ内の開発者の興味によって決定されるため、コストと照らして充分な価値のある変更には充分なリソースが当てられて取り組まれると期待できるが、それはつまり、拡張や修正のコストが高ければ実装を行うハードルも高くなってしまうということである。
また、コーディングスタイルもクローズドなプロジェクトと比較すると流動化する可能性が高い。
この場合、もちろんより最適なスタイルが選択されていく場合もあるが、ソフトウェア全体で統一したスタイルを徹底することはより難しくなっていくだろう。
クローズドなプロジェクトではそのメリットが限定的になりがちであるモジュール化やマルチプラットフォーム化がそれを所望する熱心な開発者によって進められていく可能性が高いという点は、オープンソースプロジェクトにおけるポジティブな変化と捉えていいだろう。
特にマルチプラットフォーム化は、各プラットフォームの熱心なユーザにとってはその対象ソフトウェアを使用するための必要不可欠な第1歩となるため、特に活発化する可能性が高いとかんがえられる。

ここに挙げた中で最も注目すべき変化は表~\ref{table:open-source-change}中1番上の拡張・修正のコストがある機能を実装するか否かを判断する上で重要な変数となるという点である。
プロジェクトをより活発化するためには、開発方針を明確化したりより多くのリソースを集められるように注力するのではなく、少しでもソフトウェアの拡張・修正コストを下げる必要が出てくるのである。

\afterpage{\clearpage}
\section{拡張・修正のコストと可読性}
\label{open-source:readability}

特に実用に用いられる大規模なソフトウェアにおいて、それを拡張・修正するためのコストがソフトウェアのソースコードの複雑性に大きな影響を受けるということはBankerらによる調査などによって示されている~\cite{banker-datar} ~\cite{banker-davis}。
また、ソフトウェアの持つ特徴だけでなく、そのソフトウェアを拡張・修正しようとする開発者の知識にもそのコストは左右される ~\cite{elshoff}。
そのため、本研究ではこれら2つの要因を複合したものを可読性とし、それらには表~\ref{table:readability-relation}に示すような関係性があることを前提とする。
なお、ここで言及したソフトウェアの複雑性については、その要因から表~\ref{table:complexity-elements}に示すように3つの側面に分解することができる ~\cite{yu}。

すなわち、例えばソフトウェアで使用されている手法をうまく改善すると、ソフトウェアの複雑性を改善することができ、結果としてソフトウェアの可読性の向上ひいては拡張・修正するためのコストの減少を達成することができる。

\begin{table}[!hbtp]
    \begin{center}
        \caption{可読性を決定する要因と可読性との関係}
        \begin{tabular}{|p{0.4\linewidth}|p{0.55\linewidth}|}
            \hline
            可読性を決定する要因 & 可読性との関係 \\
            \hline
            \hline
            ソフトウェアの複雑性 & 複雑性が高いと可読性が下がる \\
            \hline
            ソフトウェアの対象とする問題や使用している手法に対するプログラム読者の知識 & 知識が多いと可読性が上がる \\
            \hline
        \end{tabular}
        \label{table:readability-relation}
    \end{center}
\end{table}

\begin{table}[!hbtp]
    \begin{center}
        \caption{ソフトウェアの複雑性に影響する要因}
        \begin{tabular}{|p{0.6\linewidth}|p{0.2\linewidth}|p{0.2\linewidth}|}
            \hline
            影響を与える要因 & 影響の大きさ & 改善できる可能性 \\
            \hline
            \hline
            ソフトウェアが対象とする問題 & 大きい & とても低い \\
            \hline
            ソフトウェアに使用するプログラミング言語・モデリング手法・設計手法 & 比較して大きい & 比較して低い \\
            \hline
            ソフトウェアの開発に参加する開発者の技術や知識 & 比較して小さい & 充分に高い \\
            \hline
        \end{tabular}
        \label{table:complexity-elements}
    \end{center}
\end{table}

\afterpage{\clearpage}
\section{本研究が着目する課題}
\label{open-source:issue}

本研究では、プログラミング言語Swiftがそのオープンソース化によって~\ref{open-source:change}節および~\ref{open-source:readability}節で示したようにソフトウェアの拡張や修正のコストを下げるためにも可読性を向上させるべき状況にあるという課題に着目する。

~\ref{open-source:readability}節で見たように、この課題を解決するためには可読性に影響を与える要因について何らかの改善を行う必要があるが、現在のSwiftでは未だ可読性の維持・向上のための明確な施策は打ち出されていない。
また、現在のソースコードの可読性は丁寧なコードレビューを重ねることによって保たれているが、これはプロジェクトが大きくなることでレビュアーが多様化することによって成り立たなくなったり、プロジェクトの拡大にともなってそのレビュー自体が開発スピードのボトルネックとなる可能性があるため、好ましい状況であるとはいえない。

そこで、本研究はオープンソース化したSwiftにおいては今まで以上にそのソースコードの可読性を重視し、少しでも可読性を向上していく必要があるという考えのもとに、この課題に取り組む。

%%% Local Variables:
%%% mode: japanese-latex
%%% TeX-master: "../thesis"
%%% End:
