\chapter{評価}
\label{evaluation}

本章では、~\ref{treeswift}章で説明したTreeSwiftを用いた現行のSwiftコンパイラとの比較評価の方法とその結果について述べる。


\section{評価概要}

評価の目的はBootstrapによってSwiftコンパイラの可読性が向上しているかどうかを検証することであるが、それに加えて~\ref{explain-bootstrap:issue}節で述べた性能の変化についてもこの後のより現実的な考察のために比較を行う。
そのために、本研究では表~\ref{table:evaluation-items}に示す3種類の比較を行う。

\begin{table}[hb]
    \begin{center}
        \caption{評価のための比較項目}
        \begin{tabular}{|m{4cm}|m{11cm}|}
            \hline
            構文解析器のソースコードの行数 & 各コンパイラのソースコードの内、ファイルを読み込み、字句解析および構文解析を行い、ASTを生成するまでに実行されるプログラムを記述した部分からエラー分を定義している箇所以外を抜き出し、その行数を計測・比較する。 \\
            \hline
            構文解析の実行時間 & Swiftの異なる構文を使用した複数のプログラムを各コンパイラでコンパイルし、その構文解析にかかる時間を各コンパイラの構文解析開始箇所および終了箇所に埋め込まれた時間取得プログラムの返す時間の差分によって測定・比較する。 \\
            \hline
            構文解析時の最大使用メモリ量 & Swiftの異なる構文を使用した複数のプログラムをプロファイラによってプロファイリングしながら各コンパイラでコンパイルし、その構文解析終了時点でプログラムを強制終了することで、構文解析完了までの間で同時に確保したメモリの最大量を測定・比較する。 \\
            \hline
        \end{tabular}
        \label{table:evaluation-items}
    \end{center}
\end{table}

本研究で実装したTreeSwiftは、~\ref{treeswift:test:result}節で示したとおり現行のSwiftコンパイラと同等の構文解析機能を保持しており、~\ref{treeswift:requirements}節で述べたとおりそれらの機能が同様の手法で実現されている。
そのため、TreeSwiftと現行のSwiftコンパイラにおいては構文解析器のソースコードの行数がより少ない方が、同じ意味を把握するために参照しなければならない行が少なく、より可読性が高いと考えることができる。

~\ref{explain-bootstrap:issue}節で述べたBootstrapによってコンパイラの性能の低下が起こるかどうかについては、構文解析の実行時間と構文解析時の最大使用メモリ量を比較することで判断する。
一般にプログラムの実行速度とメモリ使用量はトレードオフの関係にあるため、それらの両方についてTreeSwiftと現行のコンパイラの間に大きな差が見られない場合か両方についてTreeSwiftの方がうわ待っている場合に限り、Bootstrapによる性能の低下はないと考えることができる。


\section{計測}

\subsection{構文解析器のソースコードの行数}

\subsection{構文解析の実行時間}

\subsection{構文解析時の最大使用メモリ量}

\section{考察}

%%% Local Variables:
%%% mode: japanese-latex
%%% TeX-master: "../thesis"
%%% End:
